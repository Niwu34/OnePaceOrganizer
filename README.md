# One Pace Renamer

This program renames all One Pace video files to a format that is compatible for both Plex and Jellyfin, and either updates the metadata if running on Plex, or generates metadata files for use with Jellyfin.

These .nfo files for Jellyfin are automatically generated by the program itself. Also, this is not an addon for Plex, and Plex does not need any addons for this to work as this program uses the Plex API to update all of the metadata.

By the end, on your Plex or Jellyfin setup, you should have:

- Posters for the Anime and Season/Arcs automatically set for you
- TV Show, Season/Arc, and Episode metadata automatically set
- All One Pace files renamed to be recognized by Plex

You can also re-run the program when new One Pace releases for quick renaming, and this does not require every single One Pace release ever released in order to function.

**Note: this program is in BETA. Things may break and error handling could be a lot better. Contributions also welcome on that.**

## Usage

### Running the Program

There are two ways you can run this. The first is via the [Releases](https://github.com/ladyisatis/one_pace_renamer/releases) page.

The other is through Python 3.13+, run via these instructions:

```
# First-Time Setup:

$ python3 -m venv venv
$ . venv/bin/activate
$ pip install -U pip setuptools
$ pip install poetry
$ poetry install

# To run the program:

$ python src/main.py
```

### Instructions

1. Create a folder containing nothing except the `.mkv` (or `.mp4`) files. By default, it'll assume you've made a folder named `in` in the same directory as the `.exe` (if using Windows release) or one folder up from `src`.
2. Run the `.exe` (Windows release) or `python src/main.py` (from source code).
3. There will be a wizard to guide you through the steps. I'm hoping this wizard is replaced with an actual windowed GUI in the near future instead of a scary-looking terminal outfit.

The first step will ask for the folder you made in step 1.

For output, this will assume a directory of, for example, `C:\Plex_Jellyfin\Anime\One Pace`, `/mnt/storage/Anime/One Pace`, etc., however keep in mind this won't be the *exact* path needed. This is going to be the folder that `Season 01`, `Season 02`, ...and so on and all of the subsequent video files will be put into.

If you're using Jellyfin, nothing else is necessary, and the program is re-usable for newer One Pace releases, even if it's for a single video file.

If you're using Plex, there will be a two step process: one will move all of the video files to the output directory, so in case your Plex server is on a separate server/computer, this will give you time to transfer everything. Let Plex (incorrectly) index all of said files that get added to Plex. Once that's done, the second step will contact the Plex API to upload posters and edit show, arc/season, and episode metadata.

## Adding Data on Episodes and Seasons

Metadata is provided in YAML format. For episodes, this [README](https://github.com/ladyisatis/one_pace_renamer/tree/main/data/episodes#readme) at the bottom of `data/episodes` gives a bit of information on how to add new files.

If there are new One Pace releases, send a [Pull Request](https://github.com/ladyisatis/one_pace_renamer/pulls) with the added `.yml` in the `data/episodes` folder.

The following two are used for metadata:

- [One Pace Episode Guide](https://docs.google.com/spreadsheets/d/1HQRMJgu_zArp-sLnvFMDzOyjdsht87eFLECxMK858lA/) for CRC32, Manga Chapters, Anime Episodes
- [One Pace Episode Descriptions](https://docs.google.com/spreadsheets/d/1M0Aa2p5x7NioaH9-u8FyHq6rH3t5s6Sccs8GoC6pHAM/) for descriptions for arcs and episodes

Note that future One Pace releases are allowed to be submitted as well, though if the CRC32 isn't known, it can be submitted in the format `Season_99_Episode_99.yml` where 99 in both the season and episode is replaced with the actual season number and episode number with no leading zeroes. Any future releases will be renamed once the actual video file is out and the CRC32 is known.

For additional data that this program uses:

- [Posters for both One Pace itself and all arcs](https://github.com/ladyisatis/one_pace_renamer/tree/main/data/posters) (`data/posters`)
- [Season/Arc information](https://github.com/ladyisatis/one_pace_renamer/blob/main/data/seasons.yml) (`data/seasons.yml`)
- [One Pace Show information](https://github.com/ladyisatis/one_pace_renamer/blob/main/data/tvshow.yml) (`data/tvshow.yml`)

## Thanks

- Craigy (@verywittyname on Discord) for Episode Descriptions spreadsheets and updates
- [SpykerNZ/one-pace-for-plex](https://github.comSpykerNZ/one-pace-for-plex) for NFO setup
  - and posters (which were also done by [/u/piratezekk](https://www.reddit.com/user/piratezekk))
- [matteron/one-pace-plex-api](https://github.com/matteron/one-pace-plex-api) for the code that updates the Plex API
- The [One Pace Team](https://onepace.net/) itself for fantastic edits and for getting the group I watch One Piece with through without losing their minds
